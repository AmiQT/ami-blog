---
import { getCollection, type CollectionEntry } from 'astro:content';
import Layout from '../../layouts/Layout.astro';
import BlogPost from '../../components/BlogPost.astro';
import Breadcrumbs from '../../components/Breadcrumbs.astro';

export async function getStaticPaths() {
  const posts = await getCollection('blog');
  return posts.map((post) => ({
    params: { slug: post.slug },
    props: { post },
  }));
}

type Props = CollectionEntry<'blog'>;

const { post } = Astro.props;
const { Content } = await post.render();

// Breadcrumb items
const breadcrumbItems = [
  { label: 'Home', href: '/' },
  { label: 'Blog', href: '/blog' },
  { label: post.data.title }
];
---

<Layout 
  title={post.data.title}
  description={post.data.description}
  image={post.data.heroImage}
>
  <!-- Hero Section -->
  <section class="py-20 bg-gradient-to-br from-blue-600 via-purple-600 to-indigo-700 text-white">
    <div class="container mx-auto px-4 text-center">
      <div class="max-w-4xl mx-auto">
        <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold mb-6 leading-tight">
          {post.data.title}
        </h1>
        <p class="text-xl md:text-2xl opacity-90 max-w-3xl mx-auto leading-relaxed">
          {post.data.description}
        </p>
      </div>
    </div>
  </section>

  <!-- Article Content -->
  <section class="py-24 bg-gray-50">
    <div class="container mx-auto px-4">
      <div class="max-w-6xl mx-auto">
        <Breadcrumbs items={breadcrumbItems} />
        <div class="bg-white rounded-3xl shadow-2xl p-8 md:p-16 lg:p-20">
          <BlogPost post={post} content={Content}>
            <Content />
          </BlogPost>
        </div>
      </div>
    </div>
  </section>
</Layout>
