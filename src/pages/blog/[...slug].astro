---
import { getCollection, type CollectionEntry } from 'astro:content';
import Layout from '../../layouts/Layout.astro';
import BlogPost from '../../components/BlogPost.astro';
import Breadcrumbs from '../../components/Breadcrumbs.astro';

export async function getStaticPaths() {
  const posts = await getCollection('blog');
  return posts.map((post) => ({
    params: { slug: post.slug },
    props: { post },
  }));
}

type Props = CollectionEntry<'blog'>;

const { post } = Astro.props;
const { Content } = await post.render();

// Breadcrumb items
const breadcrumbItems = [
  { label: 'Home', href: '/' },
  { label: 'Blog', href: '/blog' },
  { label: post.data.title }
];
---

<Layout 
  title={post.data.title}
  description={post.data.description}
  image={post.data.heroImage}
>
  <section class="py-16 bg-gradient-to-r from-blue-600 to-purple-600 text-white">
    <div class="container mx-auto px-4 text-center">
      <h1 class="text-4xl md:text-5xl font-bold mb-4">{post.data.title}</h1>
      <p class="text-xl opacity-90 max-w-3xl mx-auto">{post.data.description}</p>
    </div>
  </section>

  <section class="py-16 bg-white">
    <div class="container mx-auto px-4">
      <Breadcrumbs items={breadcrumbItems} />
      <BlogPost post={post} content={Content}>
        <Content />
      </BlogPost>
    </div>
  </section>
</Layout>
