---
export interface Props {
  title?: string;
  subtitle?: string;
  showSocial?: boolean;
}

const { 
  title = "Stay Updated with AI Insights",
  subtitle = "Get the latest AI tool reviews, industry updates, and expert insights delivered to your inbox.",
  showSocial = true 
} = Astro.props;
---

<section class="bg-blue-50 py-16">
  <div class="container mx-auto px-4">
    <div class="max-w-2xl mx-auto text-center">
      <h2 class="text-3xl font-bold text-gray-900 mb-4">
        Stay Updated with AI Tool Reviews
      </h2>
      <p class="text-lg text-gray-600 mb-8">
        Get the latest AI tool reviews, comparisons, and expert insights delivered to your inbox.
      </p>
      
      <form data-newsletter="true" class="flex flex-col sm:flex-row gap-4 max-w-md mx-auto">
        <input 
          type="email" 
          placeholder="Enter your email address" 
          required
          class="flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
        />
        <button 
          type="submit" 
          class="bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors"
        >
          Subscribe
        </button>
      </form>
      
      <p class="text-sm text-gray-500 mt-4">
        No spam, unsubscribe at any time. We respect your privacy.
      </p>
    </div>
  </div>
</section>

<script>
  // Newsletter subscription functionality (scoped to this component)
  document.addEventListener('DOMContentLoaded', function() {
    const form = document.querySelector('section.bg-blue-50 form[data-newsletter="true"]');
    if (!form) return;

    const submitButton = form.querySelector('button[type="submit"]');
    const emailInput = form.querySelector('input[type="email"]');

    form.addEventListener('submit', (e) => {
      e.preventDefault();
      const email = (emailInput && emailInput.value || '').trim();

      if (email && email.includes('@')) {
        if (typeof gtag !== 'undefined') {
          gtag('event', 'newsletter_signup', {
            event_category: 'conversion',
            event_label: 'newsletter_subscription',
            value: 1
          });
        }

        if (submitButton) {
          submitButton.textContent = 'Subscribed!';
          submitButton.classList.add('bg-green-600');
        }
        if (emailInput) emailInput.value = '';

        setTimeout(() => {
          if (submitButton) {
            submitButton.textContent = 'Subscribe';
            submitButton.classList.remove('bg-green-600');
          }
        }, 3000);
      } else if (emailInput) {
        emailInput.classList.add('border-red-500');
        setTimeout(() => emailInput.classList.remove('border-red-500'), 2000);
      }
    });
  });
</script>
